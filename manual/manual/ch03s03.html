<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Setup Time</title><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="MG4J (big): The Manual"><link rel="up" href="ch03.html" title="Chapter 3. Performance"><link rel="prev" href="ch03s02.html" title="Setting up the index structure"><link rel="next" href="ch03s04.html" title="Query Time"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Setup Time</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch03s02.html">Prev</a> </td><th width="60%" align="center">Chapter 3. Performance</th><td width="20%" align="right"> <a accesskey="n" href="ch03s04.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp140540907876080"></a>Setup Time</h2></div></div></div><p>Once the index has been created, there are many ways in which you
      can improve query resolution time. First of all, an index can be read
      from disk, memory-mapped, or directly loaded into main memory. These
      three solutions work with increasing speed and increased main memory
      usage. The default is to read an index from disk, but you can add
      suitable options to the index URI (e.g., <code class="literal">mapped=1</code> or
      <code class="literal">inmemory=1</code>―see the
      <code class="classname">Index.UriKeys</code> documentation) to force your
      preferences. Analogously, <em class="firstterm">offsets</em> are necessary
      to locate, inside the index file, the posting list of a certain term. By
      default they are read from disk using a
      <code class="classname">SemiExternalOffsetList</code>, but you can load them in
      memory if you prefer so. If you load sizes (e.g., because you want to
      run a scorer that needs them) there is a suitable URI option (e.g.,
      <code class="literal">succinctsizes=1</code>) that will load sizes in a highly
      compact format. This is particularly useful when pasting large
      indices.</p><p>To get more options, you can <a class="link" href="ch04.html#clusters">partition</a> your index. Once you have a cluster
      formed by several sub-indices, you can decide which sub-indices go to
      memory, which will be mapped, and so on.</p><p>An important source of delay in loading the index is the expansion
      of the dump file of an
      <code class="classname">ImmutableExternalPrefixMap</code>, which is the default
      term map generated by <code class="classname">IndexBuilder</code>. The dump file
      must be copied from the serialized representation to a temporary
      directory, and for large collections the process can be very slow. The
      solution is either to use a different term map (e.g., some kind of
      signed hash—see the minimal perfect hash classes of <a class="ulink" href="http://sux4j.dsi.unimi.it/" target="_top">Sux4J</a>) to generate (either
      programmatically or using the main method of
      <code class="classname">ImmutableExternalPrefixMap</code>) a
      <em class="firstterm">non-self-contained</em>, synchronized instance of
      <code class="classname">ImmutableExternalPrefixMap</code> and save it using the
      standard suffix for term maps. Such an instance is based on a separate
      dump file that must be attached to the deserialized instance before
      usage (see the documentation for details). You can attach the dump
      stream by invoking</p><pre class="screen">((ImmutableExternalPrefixMap)index.termMap).setDumpStream( filename );</pre><p>with
      the appropriate argument.</p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch03s02.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch03.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch03s04.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Setting up the index structure </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Query Time</td></tr></table></div></body></html>
